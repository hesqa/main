# Тема 7. Работа с файлами (ввод, вывод).
Отчет по Теме #7 выполнил(а):
- Филин Константин Сергеевич
- ОЗИВТ-22-2-У

| Задание | Лаб_раб | Сам_раб |
| ------ | ------ | ------ |
| Задание 1 | + | + |
| Задание 2 | + | + |
| Задание 3 | + | + |
| Задание 4 | + | + |
| Задание 5 | + | + |
| Задание 6 | + | - |
| Задание 7 | + | - |
| Задание 8 | + | - |
| Задание 9 | + | - |
| Задание 10 | + | - |

знак "+" - задание выполнено; знак "-" - задание не выполнено;

Работу проверили:
- к.э.н., доцент Панов М.А.

## Лабораторная работа №1
### Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.

### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_1.png)

## Лабораторная работа №2
### Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию open()/close().

```python
f = open('inp.txt', 'r')
print(f.readline())
f.close()
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_2.png)

## Лабораторная работа №3
### Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию open()/close().
```python
f = open('inp.txt', 'r')
print(f.readlines())
f.close()
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_3.png)
  
## Лабораторная работа №4
### Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open().

```python
with open('inp.txt') as f:
    print(f.readlines())
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_4.png)

## Лабораторная работа №5
### Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().

```python
with open('inp.txt') as f:
    for line in f:
        print(line)
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_5.png)

## Лабораторная работа №6
### Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом. Обязательно проверьте сам файл, чтобы изменения в нем тоже отображались.

```python
with open('inp.txt', 'a+') as f:
    f.write('\nIm additional line')

with open('inp.txt', 'r') as f:
    result = f.readlines()
    print(result)
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_6.png)

## Лабораторная работа №7
### Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно вами составленного списка. Также не забудьте проверить что измененная вами информация сохранилась в файле.
```python
lines = ['one', 'two', 'three']
with open('inp.txt', 'w') as f:
    for line in lines:
        f.write('\nCycle run ' + line)
    print('Done!')
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_7.png)

## Лабораторная работа №8
### Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, как и всех подкаталогов при помощи функции print_docs(directory).

```python
import os


def print_docs(directory):
    all_files = os.walk(directory)
    for catalog in all_files:
        print(f'Директории: {", ".join([folder for folder in catalog[1]])}')
        print(f'Файлы: {", ".join([file for file in catalog[2]])}')
        print('-' * 40)



print_docs('C:/Users/nail_/Downloads/directory')
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_8.png)

## Лабораторная работа №9
### Документ «input.txt» содержит следующий текст: Приветствие Спасибо Извините Пожалуйста До свидания Ты готов? Как дела? С днем рождения! Удача! Я тебя люблю. Требуется реализовать функцию, которая выводит слово, имеющее максимальную длину (или список слов, если таковых несколько). Проверьте работоспособность программы на своем наборе данных

```python
def longest_words(file):
    with open(file, encoding='utf-8') as f:
        words = f.read().split()
        max_length = len(max(words, key=len))
        for word in words:
            if len(word) == max_length:
                sought_words = word

        if len(sought_words) == 1:
            return sought_words[0]
        return sought_words


print(longest_words('inp.txt'))
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_9.png)

## Лабораторная работа №10
### Требуется создать csv-файл «rows_300.csv» со следующими столбцами: •	№ - номер по порядку (от 1 до 300); •	Секунда – текущая секунда на вашем ПК; •	Микросекунда – текущая миллисекунда на часах. Для наглядности на каждой итерации цикла искусственно приостанавливайте скрипт на 0,01 секунды.

```python
import csv
import datetime
import time

with open('rows_300.csv', 'w', encoding='utf-8', newline='') as f:
    writer = csv.writer(f)
    writer.writerow(['№', 'Секунда', 'Микросекунда'])
    for line in range(1,301):
        writer.writerow([line, datetime.datetime.now().second,
                         datetime.datetime.now().microsecond])
        time.sleep(0.01)
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/7_10.png)

## Самостоятельная работа №1
### Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. Результатом выполнения задачи будет: скриншот файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация.

```python
def count_words(file_path):
    with open(file_path, 'r', encoding='utf-8') as file:
        content = file.read()
        words = content.split()
        word_count = len(words)

        word_frequency = {}
        for word in words:
            word_frequency[word] = word_frequency.get(word, 0) + 1

        most_common_word = max(word_frequency, key=word_frequency.get)

        return word_count, most_common_word, word_frequency

file_path = 'statiya.txt'
word_count, most_common_word, word_frequency = count_words(file_path)

print(f"Количество слов в файле: {word_count}")
print(f"Самое часто встречающееся слово: {most_common_word}")
print("Частота каждого слова:")
for word, frequency in word_frequency.items():
    print(f"{word}: {frequency}")
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/s7_1.png)
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/s7_1_2.png)

## Выводы
Программа посчитала количество слов в файле, определила самое часто встречающееся слово и выявила частоту каждого слова.
  
## Самостоятельная работа №2
### У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу что вас ничего не устраивает и нужно все делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять ее в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. Результатом выполнения задачи будет: скриншот файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.

```python
import os
import json

def input_expense():
    n = input("Введите название расхода: ")
    a = float(input("Введите сумму расхода: "))
    d = input("Введите дату расхода (в формате ГГГГ-ММ-ДД): ")
    return {"name": n, "amount": a, "date": d}

def save_expenses(expenses, filename="expenses.json"):
    with open(filename, "w") as file:
        json.dump(expenses, file)

def load_expenses(filename="expenses.json"):
    if os.path.exists(filename):
        with open(filename, "r") as file:
            return json.load(file)
    else:
        return []

def display_expenses(expenses):
    if not expenses:
        print("Нет сохраненных расходов.")
    else:
        for expense in expenses:
            print(f"Название: {expense['name']}, Сумма: {expense['amount']}, Дата: {expense['date']}")

def main():
    expenses = load_expenses()

    while True:
        print("\nВыберите действие:")
        print("1. Ввести новый расход")
        print("2. Показать существующие расходы")
        print("3. Сохранить и выйти")

        choice = input("Введите номер действия: ")

        if choice == "1":
            new_expense = input_expense()
            expenses.append(new_expense)
        elif choice == "2":
            display_expenses(expenses)
        elif choice == "3":
            save_expenses(expenses)
            print("Расходы сохранены. Программа завершена.")
            break
        else:
            print("Неверный выбор. Попробуйте еще раз.")

if __name__ == "__main__":
    main()
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/s7_2_1.png)
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/s7_2.2.png)

## Выводы
Программа даёт возможность вводить новые расходы, просматривать уже существующие расходы, вся эта информация сохраняется в отдельный файл расширения .json.
  
## Самостоятельная работа №3
### Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита; число слов; число строк.

```python
def calculate_statistics(file_path):
    letter_count = 0
    word_count = 0
    line_count = 0

    with open(file_path, 'r', encoding='utf-8') as file:
        for line in file:
            line_count += 1

            letter_count += sum(c.isalpha() for c in line)

            word_count += len(line.split())

    print(f"Letters: {letter_count}")
    print(f"Words: {word_count}")
    print(f"Lines: {line_count}")

calculate_statistics('inp1.txt')
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/s7_3.png)

## Выводы
Программа вычисляет и выводит количество букв латинского алфавита, число слов и число строк текста.
  
## Самостоятельная работа №4
### Напишите программу, которая получает на вход предложение, выводит его в терминал, заменяя все запрещенные слова звездочками * (количество звездочек равно количеству букв в слове). Запрещенные слова, разделенные символом пробела, хранятся в текстовом файле input.txt. Все слова в этом файле записаны в нижнем регистре. Программа должна заменить запрещенные слова, где бы они ни встречались, даже в середине другого слова. Замена производится независимо от регистра: если файл input.txt содержит запрещенное слово exam, то слова exam, Exam, ExaM, EXAM и exAm должны быть заменены на ****.

```python
def load_prohibited_words(file_path):
    with open(file_path, 'r') as file:
        prohibited_words = file.read().split()
    return prohibited_words

def censor_sentence(sentence, prohibited_words):
    words = sentence.split()
    censored_words = []

    for word in words:
        lowercase_word = word.lower()
        if lowercase_word in prohibited_words:
            censored_word = '*' * len(word)
            censored_words.append(censored_word)
        else:
            censored_words.append(word)

    censored_sentence = ' '.join(censored_words)
    return censored_sentence

def main():
    prohibited_words_file = 'inp2.txt'
    sentence = input("Введите предложение: ")

    prohibited_words = load_prohibited_words(prohibited_words_file)
    censored_sentence = censor_sentence(sentence, prohibited_words)

    print("Цензурированное предложение:")
    print(censored_sentence)

if __name__ == "__main__":
    main()
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/s7_4.png)

## Выводы

Программа получает на вход предложение в котором заменяет все запрещенный слова на звездочки, список запрещенных слов указан в отдельном файле.
  
## Самостоятельная работа №5
### Самостоятельно придумайте и решите задачу, которая будет взаимодействовать с текстовым файлом.

```python
grades_dict = {}
with open("inp3.txt", "r") as file:
    for line in file:
        data = line.strip().split()
        student_name = data[0]
        grade = int(data[1])
        grades_dict[student_name] = grade
def average_grade(grades):
    total_grades = sum(grades.values())
    num_students = len(grades)
    return total_grades / num_students

avg = average_grade(grades_dict)
print(f"Средний балл по всем студентам: {avg}")
def filter_grades(grades, threshold):
    filtered_grades = {name: grade for name, grade in grades.items() if grade > threshold}
    return filtered_grades

threshold = 80
filtered_dict = filter_grades(grades_dict, threshold)
print(f"Студенты с оценкой выше {threshold}: {filtered_dict}")
```
### Результат.
![Меню](https://github.com/hesqa/main/blob/Theme_7/pic/s7_5.png)

## Выводы

Программа получает на вход информацию о результатах студентов, которая хранится в отдельном файле. Программа вычисляет средний балл всех студентов и выводит студентов чья оценка выше 70.

## Выводы по модулю
С помощью данной темы я изучил и опробовал на практике работу с отдельными файлами (ввод, вывод и хранение информации). 
